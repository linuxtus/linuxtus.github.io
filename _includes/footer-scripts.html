<!-- js -->
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.slim.min.js" integrity="sha512-6ORWJX/LrnSjBzwefdNUyLCMTIsGoNP6NftMy2UAm1JBm6PRZCO1d7OHBStWpVFZLO+RerTvqX/Z9mBFfCJZ4A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>
<script async src="/assets/js/lazyload.min.js"></script>

{% if jekyll.environment == 'production' %}
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-R3RJFJQLCL"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-R3RJFJQLCL');
  </script>
{% endif %}

<!-- Post -->
{% if page.path contains '_posts' %}
  <script defer src="/assets/js/post-toc.js"></script>

  <script>
    window.addEventListener('DOMContentLoaded', function () {
      $('#toc').toc();
    })
  </script>

  <!-- load addthis -->
  <script>
    window.addEventListener('load', function() {
      var is_load = 0

      window.addEventListener('scroll', function() {
        if (is_load == 0) {
          is_load = 1
          var an = document.createElement('script')
          an.async = true;
          an.src = '//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-615d7bbba282b8c0'
          var sc = document.getElementsByTagName('script')[0]
          sc.parentNode.insertBefore(an, sc);
        }
      })
    })
  </script>

  <!-- load facebook comments -->
  <script>
    window.addEventListener('load', function() {
      var is_load_fb = 0

      window.addEventListener('scroll', function() {
        if (is_load_fb == 0) {
          is_load_fb = 1
          var an = document.createElement('script')
          an.async = true;
          an.defer = true;
          an.crossorigin = "anonymous";
          an.src = 'https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v12.0&appId=248296667114055&autoLogAppEvents=1'
          an.nonce = "5wVoky5Z";
          var sc = document.getElementsByTagName('script')[0]
          sc.parentNode.insertBefore(an, sc);
        }
      })
    })
  </script>

{% endif %}

{% if page.name == "search.html" %}
  <script defer src="/assets/js/search-posts.js"></script>
{% endif %}