<!-- js -->
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.slim.min.js" integrity="sha512-6ORWJX/LrnSjBzwefdNUyLCMTIsGoNP6NftMy2UAm1JBm6PRZCO1d7OHBStWpVFZLO+RerTvqX/Z9mBFfCJZ4A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>
<script async src="/assets/js/lazyload.min.js"></script>

{% if jekyll.environment == 'production' %}
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-R3RJFJQLCL"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-R3RJFJQLCL');
  </script>
{% endif %}

<!-- Post -->
{% if page.path contains '_posts' %}
  <script defer src="/assets/js/post-toc.js"></script>

  <script>
    window.addEventListener('DOMContentLoaded', function () {
      $('#toc').toc();
      $("#toc-post").toc();
    })
  </script>

  <!-- load addthis -->
  <script>
    window.addEventListener('load', function() {
      var is_load = 0

      window.addEventListener('scroll', function() {
        if (is_load == 0) {
          is_load = 1
          var an = document.createElement('script')
          an.async = 'true';
          an.src = '//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-615d7bbba282b8c0';
          var sc = document.getElementsByTagName('script')[0]
          sc.parentNode.insertBefore(an, sc);
        }
      })
    })
  </script>

  <!-- load comments -->
  <script id="dsq-count-scr" src="//https-tgbao-me.disqus.com/count.js" async></script>

  <!-- load scroll effect -->
  <div class="header-progress">
    <div class="progress-container">
      <div class="progress-bar" id="progress-bar"></div>
    </div>
  </div>

  <script>
    window.onscroll = function() {
      var winScroll = document.body.scrollTop || document.documentElement.scrollTop;
      var height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
      var scrolled = (winScroll / height) * 100;
      document.getElementById("progress-bar").style.width = scrolled + "%";
    };
  </script>
{% endif %}

{% if page.name == "search.html" %}
  <script defer src="/assets/js/search-posts.js"></script>
{% endif %}

<!-- load mailchimp -->
<script id="mcjs">
  window.addEventListener('load', function() {
    var is_load_mailchimp = 0

    window.addEventListener('scroll', function() {
      if (is_load_mailchimp == 0) {
        is_load_mailchimp = 1
        !function(c,h,i,m,p){m=c.createElement(h),p=c.getElementsByTagName(h)[0],m.async=1,m.src=i,p.parentNode.insertBefore(m,p)}(document,"script","https://chimpstatic.com/mcjs-connected/js/users/41c67fbcba7ea4c2b27706c4c/f923a9151878494cf95731cd2.js");
      }
    })
  })
</script>